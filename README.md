<h1>Flare-VM Malware Analysis Lab Environment</h1>



<h2>Description</h2>
Welcome to the Flare-VM Malware Analysis Lab Environment project! This repository provides comprehensive documentation and resources to help you set up a powerful and versatile malware analysis lab using Flare-VM. Whether you're a seasoned cybersecurity professional or just diving into the world of malware analysis, this project aims to guide you through the installation, configuration, and usage of Flare-VM for both static and dynamic malware analysis.
<br />

<h2>About Flare-VM</h2>
Flare-VM is a purpose-built virtual machine for malware analysis and reverse engineering tasks. It is carefully curated with a suite of tools and utilities to facilitate the analysis of malicious software in a controlled environment. This project serves as a step-by-step guide to help you set up Flare-VM and harness its capabilities effectively.
<br/>

<h2>What You''ll Find in This Repository</h2>
Installation Guide: Step-by-step instructions to set up Flare-VM on your system, including system requirements and configuration details.

Usage Tutorials: Comprehensive guides on how to conduct static and dynamic analysis using Flare-VM. Learn the best practices for examining malicious software and identifying potential risks.

Sample Scenarios: Real-world examples of malware analysis scenarios, showcasing how to apply Flare-VM's capabilities to dissect and understand various types of malicious code.

Static Analysis: Learn how to perform static analysis of malware samples, dissecting binaries and examining code without execution. Uncover hidden functionality and gain insights into the inner workings of malicious software.

Dynamic Analysis: Dive into the world of dynamic analysis by executing malware samples in a controlled environment. Observe their behavior, monitor network traffic, and identify potential threats.
<br/>

<h2>Languages and Utilities Used</h2>

- <b>PowerShell</b> 
- <b>Orcale Virtual Box</b>
- <b>Python</b>

<h2>Environments Used </h2>

- <b>Flare VM</b>
- <b>RemNux</b>
- <b>Windows 10</b>


<h2>Flare Walkthrough:</h2>
<ul>
    <li><b>Begin by downloading a Windows 10 ISO file and Oracle VirtualBox from the links below:</b></li>
    <ul>
        <li><a href="https://www.microsoft.com/en-us/software-download/windows10">Windows 10 ISO Download</a></li>
        <li><a href="https://www.virtualbox.org/">Oracle VirtualBox Download</a></li>
    </ul>
    <li><b>Configure a VirtualBox VM with the Windows 10 ISO using the following hardware requirements:</b></li>
    <li><b>Hardware Requirements Image: requeriments.png</b></li>
    <li><b>After setting up the Win10 VM, take a snapshot before proceeding to download and install FlareVM.</b></li>
    <li><b>Download and Install FlareVM:</b></li>
    <ol>
        <li><b>Change the administrator execution policy using an administrator PowerShell. Run the command:</b></li>
        <code>Set-ExecutionPolicy Unrestricted</code>
        <li><b>Download FlareVM using the link below. Find "installer.ps1", copy the link address, and paste it in the terminal with "wget".</b></li>
        <code>wget https://raw.githubusercontent.com/mandiant/flare-vm/main/install.ps1 -UseBasicParsing -outfile C:\Users\YourUserName\Desktop\install.ps1</code>
        <li><a href="https://github.com/mandiant/flare-vm"><b>FlareVM GitHub Repository</b></a></li>
        <li><b>Before running the PowerShell script, disable Windows Defender through Group Policy:</b></li>
        <ul>
            <li>Press Windows Key + R, type <code>gpedit.msc</code> to open the Group Policy Editor.</li>
            <li>Navigate through branches: Administrator Templates -> Windows Components -> Microsoft Defender Antivirus -> Turn off Microsoft Defender Antivirus.</li>
        </ul>
        <li><b>To install FlareVM, run the command <code>.\install.ps1</code> in the terminal.</b></li>
<li><b>FlareVM install complete! You're now ready to start your malware analysis journey.</b></li>
    </ol>
</ul>



<h2>REMnux Walkthrough:</h2>
<ul>
    <li><b>Start by downloading the REMnux distribution from the link below:</b></li>
     <ul>
        <li><a href="https://app.box.com/s/8matvs5l0gc8vkr4xfq3szdm7mc9o0ad">Download REMnux OVA File</a></li>
    </ul>
    <li><b>After downloading the OVA file, left-click on the file and choose "Open With Virtual Manager."</b></li>
    <li><b>REMnux comes pre-built, so the next step is to import it using VirtualBox.</b></li>
    <li><b>Once the REMnux virtual machine is running, create a new directory with the command:</b></li>
    <code>sudo mkdir /media/cdrom</code>
    <li><b>Mount the VirtualBox Guest Additions by running:</b></li>
    <code>sudo mount /dev/cdrom /media/cdrom</code>
    <li><b>Navigate to the new directory with the command:</b></li>
    <code>cd /media/cdrom/</code>
    <li><b>Switch to the root user:</b></li>
    <code>sudo -s</code>
    <li><b>To install VirtualBox Guest Additions, run:</b></li>
    <code>./autorun.sh</code>
    <li><b>Reboot the machine to complete the installation of Guest Additions.</b></li>
    <li><b>Take a snapshot, and your REMnux setup is now complete!</b></li>
</ul>











<h2>Network Setup:</h2>
<ul>
    <li><b>We need to set up a safe enviroment that we can detonate malware and not risk it getting out</b></li>
    <b>Our goal is to set up a enviroment that is physicaly separte from our host network, while still having our FlareVM and REMnux machines connected</b>
    <b>To start we need to use our VirutualBox Manager to set up a network. Click tools then network then create network. Under Configure Adapter Manually change the IP address to 10.0.0.1 and the subnet mask 255.255.255.0 and Lower Address Bound 10.0.0.3 and the Upper Address Bound 10.0.0.254 the apply changes </b>
    <b>Now we need to change our machines IP address</b>
    <b>In each of the machines we need to change there network adapter to "Host-only Adapter" and the name of the newly created adapter </b>
    <b>Note: ensure we are only using Adapter 1 and the rest are disabled </b>

    <b>If network is set up properly, the machines will be able to ping eachother but not outside the network</b>


<h2>Network Setup:</h2>
<p>For safe malware detonation, it's crucial to establish a controlled environment that prevents any potential risks of malware escaping.</p>
<p>Our objective is to create a physically isolated environment from our host network while maintaining connectivity between our FlareVM and REMnux machines.</p>
<p>Here's the step-by-step process to set up the network:</p>
<ol>
    <li><b>Create a Dedicated Network:</b></li>
    <ul>
        <li>Open VirtualBox Manager and navigate to <b>Tools > Network > Create Network</b>.</li>
        <li>Manually configure the adapter:</li>
        <ul>
            <li>IP Address: <b>10.0.0.1</b></li>
            <li>Subnet Mask: <b>255.255.255.0</b></li>
            <li>Lower Address Bound: <b>10.0.0.3</b></li>
            <li>Upper Address Bound: <b>10.0.0.254</b></li>
        </ul>
        <li>Apply the changes.</li>
    </ul>
    <li><b>Configure Machine Network Settings:</b></li>
    <ul>
        <li>On each machine, set the network adapter to <b>"Host-only Adapter"</b> and select the name of the newly created network.</li>
        <li>Note: Only use <b>Adapter 1</b> and disable the rest of the adapters.</li>
    </ul>
    <li><b>Verify Network Isolation:</b></li>
    <p>With the network properly set up, the machines should be able to ping each other within the network but remain isolated from the external network.</p>
</ol>
<p>By following these steps, you'll create a secure environment for malware analysis that prevents any unintended network exposure.</p>









